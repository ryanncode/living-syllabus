# The Living Syllabus User Guide

## Phase 1: Setup (Installation & Workflow)

### 1.1. The "No-Code" Promise

You do not need to be a software developer to use this tool. You are adopting the role of a **Maintainer**.

* **The Author** writes content.
* **The Developer** writes code.
* **The Maintainer** (You) simply runs a pre-built engine that turns content into code.

This workflow replaces the Canvas Rich Text Editor with a "Compiler." You write in clean, simple text, and the engine handles 100% of the styling, accessibility, and mobile-responsiveness for you.

### 1.2. The Toolkit

Before you begin, ensure you have these three standard tools installed. They are the "printing press" for your digital syllabus.

1. **VS Code:** A distraction-free text editor. [Download here](https://code.visualstudio.com/).
2. **Pandoc:** The engine that converts text formats. [Download here](https://pandoc.org/installing.html).
3. **Node.js:** The runtime that powers the automation script. [Download here](https://nodejs.org/en/download/).

### 1.3. The Directory Structure

Create a new folder for your course (e.g., `My-Course-Syllabus`). Inside, organize your files exactly like this:

```text
/My-Course-Syllabus
‚îÇ
‚îú‚îÄ‚îÄ syllabus.md           <-- YOUR CONTENT (The only file you edit)
‚îÇ
‚îú‚îÄ‚îÄ /themes               <-- THE STYLE CLOSET
‚îÇ   ‚îú‚îÄ‚îÄ academic.css      (Serif, Ivy League style)
‚îÇ   ‚îî‚îÄ‚îÄ modern.css        (Sans-serif, Startup style)
‚îÇ
‚îú‚îÄ‚îÄ generate.js           <-- THE ENGINE (Script provided below)
‚îÇ
‚îî‚îÄ‚îÄ package.json          <-- THE CONFIG (Created automatically)
```

### 1.4. The Script (`generate.js`)

Create a file named `generate.js` in your folder and paste this code. This is the automation engine that "flattens" modern CSS into a format Canvas accepts.

```javascript
const fs = require('fs');
const juice = require('juice');
const pandoc = require('node-pandoc');
const postcss = require('postcss');
const cssVariables = require('postcss-css-variables');

// Usage: node generate.js [theme_name]
// Example: node generate.js modern

const themeName = process.argv[2] || 'academic'; // Default to 'academic'
const markdownFile = 'syllabus.md';
const cssFile = `./themes/${themeName}.css`;
const outputFile = `syllabus_${themeName}.html`;

async function buildSyllabus() {
    console.log(`\nüèóÔ∏è  Starting Build Process: [${themeName.toUpperCase()}] Theme`);

    // 1. Validation: Check if files exist
    if (!fs.existsSync(markdownFile)) {
        console.error(`‚ùå Error: Source file '${markdownFile}' not found.`);
        return;
    }
    if (!fs.existsSync(cssFile)) {
        console.error(`‚ùå Error: Theme file '${cssFile}' not found.`);
        return;
    }

    // 2. CSS PRE-PROCESSING (The "Flattening" Step)
    // We read the modern CSS and resolve all :root variables to static hex codes.
    // This prevents Canvas from breaking "var(--color-primary)" references.
    const rawCss = fs.readFileSync(cssFile, 'utf8');
    
    console.log(`   ...Compiling and flattening CSS variables...`);
    let flatCss = '';
    
    try {
        const result = await postcss([
            cssVariables({ preserve: false }) // false = remove the var(...) declaration, leave only the hex
        ]).process(rawCss, { from: cssFile, to: undefined });
        flatCss = result.css;
    } catch (err) {
        console.error('‚ùå CSS Compilation Error:', err);
        return;
    }

    // 3. PANDOC CONVERSION (The "Compiler" Step)
    // Convert Markdown to clean HTML5 fragment
    const args = '-f markdown -t html5 --wrap=none --section-divs';
    
    console.log(`   ...Converting Markdown to HTML...`);
    pandoc(markdownFile, args, (err, htmlContent) => {
        if (err) {
            console.error('‚ùå Pandoc Error:', err);
            return;
        }

        // 4. INJECTION & INLINING (The "Chemical Bonding" Step)
        // We wrap the content in a namespace div and use Juice to force-feed the styles
        const wrappedHtml = `
            <div class="syllabus-container" style="max-width: 800px; margin: 0 auto; font-family: sans-serif;">
                ${htmlContent}
            </div>
            `;

        const finalHtml = juice.inlineContent(wrappedHtml, flatCss, {
            applyStyleTags: true,
            removeStyleTags: true,
            preserveMediaQueries: false, // Canvas strips these anyway, so we bake them in if possible
            widthElements: ['table', 'td', 'th'] // Force width attributes on tables for email-like stability
        });

        // 5. FORENSIC STAMPING (The "Kirschenbaum" Protocol)
        // We add a meta-comment with the build time to track version history
        const stamp = `<!-- Generated by Canvas Component Engine on ${new Date().toISOString()} -->\n`;

        fs.writeFileSync(outputFile, stamp + finalHtml);
        console.log(`‚úÖ Success! Component generated: ${outputFile}`);
        console.log(`üëâ Next: Open this file, Select All, and Paste into Canvas HTML Editor.`);
    });
}

buildSyllabus();
```

### 1.5. Initialization

Once your files are in place, open your terminal in VS Code (Terminal -> New Terminal) and run these two commands to install the necessary libraries:

```bash
npm init -y
npm install juice node-pandoc postcss postcss-css-variables
```

You are now ready to generate.

---

## Phase 2. The Execution (Generate & Publish)

Once your setup is complete, you will repeat these two steps every time you update your syllabus.

### 2.1. The Generation (Compile)

* Open your terminal in VS Code.
* Run the command for your desired theme:

```bash
node generate.js modern
```

* *What just happened?* The tool took `syllabus.md`, applied the "Modern" theme (clean, sans-serif), flattened the CSS variables, and created a new file called `syllabus_modern.html`.

### 2.2. The Publication (Paste)
* Open the newly created `syllabus_modern.html` in VS Code.
* Copy **everything** (Ctrl+A, Ctrl+C).
* Go to a Canvas Page -> Switch to **HTML Editor** (`</>` icon bottom right).
* **Paste** the code.
* Click Save.

*Note: You never edit the HTML directly. If you need to fix a typo, edit `syllabus.md` and run the generation command again.*

---

## Appendix: Theoretical Framework

*Once you are comfortable with the workflow, explore these modules to understand the "Why" and "How" of the system.*

This design document outlines a complete workflow for generating "Syllabus as Code" components. Follow these steps to build resilient, accessible, and aesthetically modern course materials for Canvas.

**Phase 3: Configuration (The "Why")**
* **Define Your Philosophy:** Review **Module 1**. Decide on your archival strategy (Markdown source) and pedagogical stance (Emancipation/Generosity). This sets the "ethical baseline" for your content.
* **Select Your Constraints:** Review **Module 2** and **Module 3**. Choose your critical lenses (Forensics, Deformance) and infrastructural limits (Minimal Computing, Flat HTML). These choices determine *what* you build.

**Phase 4: Engineering (The "Where")**
* **Prepare the Environment:** Review **Module 4**. Understand the "Walled Garden" of Canvas. Set up your `themes/` folder with Classless CSS libraries (Pico, Simple) and ensure your `generate.js` script is ready for the "Pandoc/Juice" pipeline.
* **Choose Your Aesthetic:** Select a "Typographic Pairing" (e.g., Ivy League vs. Modern SaaS) and a "Safe Color Palette" for your components.

**Phase 5: Generation (The "How")**
* **Run the Agent:** Use **Module 5** as your prompt guide. Instruct the AI to act as a "Co-Intelligence" partner.
* **Generate Components:** Ask the AI to generate specific widgets (Callouts, Tables) using the "Micro-Component" strategy (Atomic Tailwind).
* **Compile & Publish:** Run your build script to fuse the Markdown content, AI widgets, and Global Theme into a single HTML fragment. Paste this result into the Canvas HTML editor.